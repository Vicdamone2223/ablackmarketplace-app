<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, interactive-widget=resizes-content" />
    <base href="./" />
    <title>Black Book</title>

    <!-- System UI tint -->
    <meta name="theme-color" content="#111827" />

    <!-- Safe-area CSS variables (with 24px fallback if env() returns 0) -->
    <style>
      :root {
        --safe-top: 24px;      /* fallback */
        --safe-bottom: 24px;   /* fallback */
      }
    </style>
    <script>
      (function () {
        // Read env(safe-area-inset-*) into a hidden probe; if zero, keep fallback
        try {
          const probe = document.createElement('div');
          probe.style.cssText =
            'position:fixed;top:0;left:0;visibility:hidden;' +
            'padding-top:env(safe-area-inset-top);' +
            'padding-bottom:env(safe-area-inset-bottom);';
          document.documentElement.appendChild(probe);
          const cs = getComputedStyle(probe);
          const top = parseFloat(cs.paddingTop) || 0;
          const bottom = parseFloat(cs.paddingBottom) || 0;
          if (top > 0) document.documentElement.style.setProperty('--safe-top', top + 'px');
          if (bottom > 0) document.documentElement.style.setProperty('--safe-bottom', bottom + 'px');
          probe.remove();
        } catch (_) {}
      })();
    </script>

    <!-- Ensure dark mode class is present before the app renders -->
    <script>
      (function () {
        try {
          const saved = localStorage.getItem('theme');
          const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
          const shouldDark = saved === 'dark' || (!saved && prefersDark);
          document.documentElement.classList.toggle('dark', shouldDark);
        } catch (_) {}
      })();
    </script>
  </head>
  <body class="bg-white text-black dark:bg-gray-900 dark:text-white transition-colors duration-300">
    <div id="root"></div>
    <script type="module" src="./src/main.jsx"></script>
  </body>
</html>
